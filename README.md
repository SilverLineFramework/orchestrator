# SilverLine Orchestrator

For quick setup, use the [SilverLine Services](https://github.com/SilverLineFramework/silverline-services) installer:

```sh
git clone git@github.com:SilverLineFramework/silverline-services.git
cd silverline-services; make update; make orchestrator
```

## Manual Setup

- After cloning, install python requirements:
    - `pip install -r requirements.txt`
    - Clone [libsilverline](https://github.com/SilverLineFramework/libsilverline) and install (`pip install .`)

- (Optional) Set up configuration in `config.json`. Using a configuration file generated by `configure.py` in [hc](https://github.com/SilverLineFramework/hc) is recommended, especially by `ln -s hc/config/hc.cfg orchestrator/config.json`.

    The default values used are:
    ```json
    {
        "http": "localhost",
        "http_port": 8000,
        "debug": true,
        "realm": "realm",
        "mqtt": "localhost",
        "mqtt_port": 1883,
        "use_ssl": false,
        "mqtt_username": "arts",
        "pwd": "mqtt_pwd.txt",
        "log_dir": ".",
    }
    ```

- (Optional) Create the **secret** `key.json` file for Django; should be generated locally (i.e. ```secrets.token_urlsafe(64)```), and only used locally. Schema:
    ```json
    {
        "key": "put_your_secret_key_here"
    }
    ```

- Make database:
    ```sh
    python3 manage.py migrate
    ```

- Make log directory:
    ```sh
    mkdir -p log
    ```

- Run server:
    ```sh
    python3 manage.py runserver
    ```

## APIs

See the runtime [control messages](https://github.com/SilverLineFramework/runtime-linux/wiki/Control-Messages) for full documentation. We currently implement create and delete operations for runtimes and modules.
